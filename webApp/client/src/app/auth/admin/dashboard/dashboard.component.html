<div class="flex h-screen">
  <!-- Sidebar -->
  <app-sidebar [sidebarOpen]="sidebarOpen"></app-sidebar>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col">
    <!-- Top Navbar -->
    <app-top-navbar (toggleSidebar)="toggleSidebar()"></app-top-navbar>

    <!-- Dashboard Main -->
    <main class="flex-1 p-6 bg-gray-100 overflow-y-auto text-gray-700">

      <!-- Cards ABOVE the Chart -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 px-4">
        <div
          class="bg-blue-500 text-white rounded shadow p-6 text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer">
          <h4 class="text-lg font-bold mb-2">Card 1</h4>
          <p class="text-sm">Details or metrics here</p>
        </div>

        <div
          class="bg-blue-500 text-white rounded shadow p-6 text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer">
          <h4 class="text-lg font-bold mb-2">Card 2</h4>
          <p class="text-sm">Details or metrics here</p>
        </div>

        <div
          class="bg-blue-500 text-white rounded shadow p-6 text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer">
          <h4 class="text-lg font-bold mb-2">Card 3</h4>
          <p class="text-sm">Details or metrics here</p>
        </div>

        <div
          class="bg-blue-500 text-white rounded shadow p-6 text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer">
          <h4 class="text-lg font-bold mb-2">Card 4</h4>
          <p class="text-sm">Details or metrics here</p>
        </div>
      </div>

      <!-- Line Chart BELOW the Cards -->
      <div class="grid grid-cols-1 gap-6 px-4 mb-6">
        <div
          class="bg-white p-6 rounded shadow-md h-[400px] w-full flex flex-col justify-center items-center overflow-x-auto">

          <h3 class="text-lg font-semibold mb-4 text-center">Line Graph</h3>

          <ngx-charts-line-chart [results]="lineChartData" [xAxis]="true" [yAxis]="true" [legend]="true"
            [legendPosition]="legendPosition" [showXAxisLabel]="true" [showYAxisLabel]="true" [xAxisLabel]="'Date'"
            [yAxisLabel]="'Value'" [autoScale]="true" [view]="[1000, 300]" [animations]="true" [scheme]="colorScheme">
          </ngx-charts-line-chart>

        </div>
      </div>

      <!-- Table BELOW the Line Chart -->
      <div class="bg-white rounded shadow-md p-6 px-4 overflow-x-auto ml-4 w-287">
        <!-- Filter dropdown + input -->
        <div class="flex items-center mb-4 space-x-4 max-w-md px-4">
          <select [(ngModel)]="filterColumn" class="p-2 border border-gray-300 rounded"
            aria-label="Select filter column">
            <option value="date">Date</option>
            <option value="metricA">Metric A</option>
            <option value="metricB">Metric B</option>
            <option value="metricC">Metric C</option>
            <option value="notes">Notes</option>
          </select>

          <input type="text" [(ngModel)]="filterText" (input)="applyFilter()" placeholder="Enter filter text"
            class="flex-grow p-2 border border-gray-300 rounded" aria-label="Filter text" />
        </div>

        <h3 class="text-lg font-semibold mb-4">Data Table</h3>
        <table class="min-w-full table-auto border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-200 text-gray-700">
              <th class="border border-gray-300 px-4 py-2 text-left">Date</th>
              <th class="border border-gray-300 px-4 py-2 text-left">Metric A</th>
              <th class="border border-gray-300 px-4 py-2 text-left">Metric B</th>
              <th class="border border-gray-300 px-4 py-2 text-left">Metric C</th>
              <th class="border border-gray-300 px-4 py-2 text-left">Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of filteredTableData" class="hover:bg-gray-100 cursor-pointer">
              <td class="border border-gray-300 px-4 py-2">{{ row.date }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ row.metricA }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ row.metricB }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ row.metricC }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ row.notes }}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </main>
  </div>
</div>
